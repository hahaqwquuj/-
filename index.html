<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æˆ‘çš„æ–‡æ¡£ - å®Œæ•´æŠ˜å åŠŸèƒ½</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- æ ·å¼ -->
    <style>
        /* ===== åŸºç¡€æ ·å¼ ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', sans-serif;
            font-size: 14px;
            color: #333;
            background: #f5f5f5;
        }
        
        /* ===== ä¸»å¸ƒå±€ ===== */
        #app {
            display: flex;
            min-height: 100vh;
        }
        
        /* ===== ä¾§è¾¹æ  ===== */
        .sidebar {
            width: 280px;
            background: #fff;
            border-right: 1px solid #e8e8e8;
            display: flex;
            flex-direction: column;
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            z-index: 100;
            box-shadow: 2px 0 8px rgba(0,0,0,0.06);
        }
        
        /* æ ‡ç­¾é¡µ */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid #e8e8e8;
            background: #fafafa;
            padding: 0 16px;
        }
        
        .sidebar-tab {
            flex: 1;
            padding: 12px 0;
            text-align: center;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            color: #595959;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .sidebar-tab:hover {
            color: #1890ff;
        }
        
        .sidebar-tab.active {
            color: #1890ff;
            border-bottom-color: #1890ff;
            background: #fff;
            font-weight: 500;
        }
        
        /* ä¾§è¾¹æ å†…å®¹ */
        .sidebar-content {
            flex: 1;
            overflow-y: auto;
            padding: 16px 0;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* ===== æ–‡ä»¶æ ‘æ ·å¼ ===== */
        .file-tree {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .file-tree ul {
            list-style: none;
            padding-left: 0;
            margin: 0;
            overflow: hidden;
            max-height: 0;
            transition: max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .file-tree ul.expanded {
            max-height: 1000px;
        }
        
        .tree-item {
            display: flex;
            align-items: center;
            padding: 8px 16px;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s;
            position: relative;
            border-left: 3px solid transparent;
        }
        
        .tree-item:hover {
            background: #f0f7ff;
            color: #1890ff;
        }
        
        .tree-item.active {
            background: #e6f7ff;
            color: #1890ff;
            border-left-color: #1890ff;
            font-weight: 500;
        }
        
        /* å±‚çº§ç¼©è¿›å’Œé¢œè‰² */
        .tree-item[data-level="1"] {
            padding-left: 20px;
            font-weight: 600;
            color: #262626;
        }
        
        .tree-item[data-level="2"] {
            padding-left: 36px;
            color: #595959;
        }
        
        .tree-item[data-level="3"] {
            padding-left: 52px;
            color: #8c8c8c;
            font-size: 13px;
            background: #fafafa;
        }
        
        .tree-item[data-level="4"] {
            padding-left: 68px;
            color: #bfbfbf;
            font-size: 12px;
            background: #f5f5f5;
        }
        
        /* å›¾æ ‡ */
        .tree-icon {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s;
        }
        
        .tree-item.folder > .tree-icon i {
            transform-origin: center;
            transition: transform 0.3s;
        }
        
        .tree-item.folder.collapsed > .tree-icon i {
            transform: rotate(-90deg);
        }
        
        /* ç®­å¤´ */
        .tree-arrow {
            margin-left: auto;
            color: #8c8c8c;
            font-size: 12px;
        }
        
        /* é“¾æ¥æ ·å¼ */
        .tree-item a {
            color: inherit;
            text-decoration: none;
            flex: 1;
            display: block;
        }
        
        .tree-item a:hover {
            color: inherit;
        }
        
        /* ===== å¤§çº²æ ·å¼ ===== */
        .page-outline {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .outline-item {
            display: block;
            padding: 8px 16px;
            color: #595959;
            text-decoration: none;
            transition: all 0.2s;
            border-left: 2px solid transparent;
        }
        
        .outline-item:hover {
            background: #f0f7ff;
            color: #1890ff;
        }
        
        .outline-item.active {
            background: #e6f7ff;
            color: #1890ff;
            border-left-color: #1890ff;
            font-weight: 500;
        }
        
        .outline-h1 { padding-left: 20px; font-weight: 600; color: #262626; }
        .outline-h2 { padding-left: 32px; color: #595959; }
        .outline-h3 { padding-left: 44px; color: #8c8c8c; font-size: 13px; }
        
        /* ===== ä¸»å†…å®¹åŒº ===== */
        .content-wrapper {
            flex: 1;
            margin-left: 280px;
            padding: 24px 48px;
            max-width: 900px;
        }
        
        .markdown-section {
            background: #fff;
            padding: 32px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        
        /* ===== å“åº”å¼ ===== */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .content-wrapper {
                margin-left: 0;
                padding: 16px;
            }
            
            .mobile-toggle {
                display: block !important;
            }
        }
        
        .mobile-toggle {
            display: none;
            position: fixed;
            top: 16px;
            left: 16px;
            z-index: 1000;
            background: #1890ff;
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <!-- ç§»åŠ¨ç«¯åˆ‡æ¢æŒ‰é’® -->
    <button class="mobile-toggle" id="mobileToggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- ä¸»åº”ç”¨ -->
    <div id="app"></div>

    <!-- ä¾§è¾¹æ æ¨¡æ¿ -->
    <script type="text/template" id="sidebar-template">
        <div class="sidebar">
            <div class="sidebar-tabs">
                <button class="sidebar-tab active" data-tab="file-tree">
                    <i class="fas fa-folder"></i>
                    <span>æ–‡ä»¶æ ‘</span>
                </button>
                <button class="sidebar-tab" data-tab="page-outline">
                    <i class="fas fa-list"></i>
                    <span>å¤§çº²</span>
                </button>
            </div>
            
            <div class="sidebar-content">
                <div id="file-tree" class="tab-content active">
                    <ul class="file-tree" id="fileTreeList"></ul>
                </div>
                
                <div id="page-outline" class="tab-content">
                    <ul class="page-outline" id="outlineList"></ul>
                </div>
            </div>
        </div>
        
        <div class="content-wrapper">
            <div class="markdown-section"></div>
        </div>
    </script>

    <script>
        // ===== é…ç½® =====
        window.$docsify = {
            name: 'å­¦ä¹ ç¬”è®°',
            loadSidebar: false,
            auto2top: true
        };

        // ===== æ•°æ® =====
        const treeData = [
            {
                name: 'ğŸ“š å­¦ä¹ ç¬”è®°',
                type: 'folder',
                expanded: true,
                children: [
                    {
                        name: 'åˆ¤æ–­æ¨ç†',
                        type: 'folder',
                        expanded: true,
                        children: [
                            {
                                name: 'å½’å› è®ºè¯',
                                type: 'folder',
                                expanded: true,
                                children: [
                                    {
                                        name: 'ä¸€èˆ¬å½’å› ',
                                        type: 'file',
                                        path: '#/åˆ¤æ–­æ¨ç†/ä¸€èˆ¬å½’å› ',
                                        level: 3
                                    },
                                    {
                                        name: 'å¯¹æ¯”å®éªŒå½’å› ',
                                        type: 'file',
                                        path: '#/åˆ¤æ–­æ¨ç†/å¯¹æ¯”å®éªŒå½’å› ',
                                        level: 3
                                    },
                                    {
                                        name: 'æ—¶é—´å¯¹æ¯”å½’å› ',
                                        type: 'file',
                                        path: '#/åˆ¤æ–­æ¨ç†/æ—¶é—´å¯¹æ¯”å½’å› ',
                                        level: 3
                                    }
                                ]
                            },
                            {
                                name: 'å›¾å½¢æ¨ç†',
                                type: 'folder',
                                expanded: false,
                                children: [
                                    {
                                        name: 'å®šæ€§åˆ†æ',
                                        type: 'file',
                                        path: '#/åˆ¤æ–­æ¨ç†/å›¾å½¢æ¨ç†/å®šæ€§åˆ†æ',
                                        level: 3
                                    },
                                    {
                                        name: 'å®šé‡åˆ†æ',
                                        type: 'file',
                                        path: '#/åˆ¤æ–­æ¨ç†/å›¾å½¢æ¨ç†/å®šé‡åˆ†æ',
                                        level: 3
                                    }
                                ]
                            },
                            {
                                name: 'å®šä¹‰åˆ¤æ–­',
                                type: 'file',
                                path: '#/åˆ¤æ–­æ¨ç†/å®šä¹‰åˆ¤æ–­',
                                level: 2
                            },
                            {
                                name: 'ç±»æ¯”æ¨ç†',
                                type: 'file',
                                path: '#/åˆ¤æ–­æ¨ç†/ç±»æ¯”æ¨ç†',
                                level: 2
                            }
                        ]
                    },
                    {
                        name: 'è¨€è¯­ç†è§£',
                        type: 'folder',
                        expanded: false,
                        children: [
                            {
                                name: 'ç‰‡æ®µé˜…è¯»',
                                type: 'file',
                                path: '#/è¨€è¯­ç†è§£/ç‰‡æ®µé˜…è¯»',
                                level: 2
                            }
                        ]
                    }
                ]
            }
        ];

        // ===== æ ¸å¿ƒå‡½æ•° =====
        
        // 1. åˆå§‹åŒ–å¸ƒå±€
        function initLayout() {
            const app = document.getElementById('app');
            app.innerHTML = document.getElementById('sidebar-template').innerHTML;
            
            initTabs();
            renderFileTree();
            initMobileToggle();
        }
        
        // 2. åˆå§‹åŒ–æ ‡ç­¾é¡µ
        function initTabs() {
            document.querySelectorAll('.sidebar-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    // ç§»é™¤æ‰€æœ‰æ¿€æ´»çŠ¶æ€
                    document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // æ¿€æ´»å½“å‰
                    this.classList.add('active');
                    const tabId = this.dataset.tab;
                    document.getElementById(tabId).classList.add('active');
                });
            });
        }
        
        // 3. æ¸²æŸ“æ–‡ä»¶æ ‘
        function renderFileTree() {
            const treeList = document.getElementById('fileTreeList');
            treeList.innerHTML = buildTreeHTML(treeData);
            
            // æ·»åŠ ç‚¹å‡»äº‹ä»¶
            treeList.addEventListener('click', function(e) {
                const treeItem = e.target.closest('.tree-item');
                if (!treeItem) return;
                
                // å¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œåˆ‡æ¢æŠ˜å çŠ¶æ€
                if (treeItem.classList.contains('folder')) {
                    e.preventDefault();
                    toggleFolder(treeItem);
                }
                
                // å¦‚æœæ˜¯æ–‡ä»¶ï¼Œé«˜äº®
                if (treeItem.classList.contains('file')) {
                    highlightFile(treeItem);
                }
            });
        }
        
        // 4. æ„å»ºæ ‘HTML
        function buildTreeHTML(items, level = 0) {
            let html = '';
            
            items.forEach(item => {
                const currentLevel = level + 1;
                const isFolder = item.type === 'folder';
                const isExpanded = item.expanded || false;
                
                html += `
                    <li>
                        <div class="tree-item ${isFolder ? 'folder' : 'file'} ${isFolder && !isExpanded ? 'collapsed' : ''}"
                             data-level="${currentLevel}"
                             data-name="${item.name}"
                             data-type="${item.type}">
                            <span class="tree-icon">
                                <i class="${isFolder ? 'fas fa-folder' : 'fas fa-file-alt'}"></i>
                            </span>
                            ${isFolder ? item.name : `<a href="${item.path}">${item.name}</a>`}
                            ${isFolder ? '<span class="tree-arrow"><i class="fas fa-chevron-down"></i></span>' : ''}
                        </div>
                `;
                
                // å­é¡¹
                if (isFolder && item.children) {
                    html += `<ul class="${isExpanded ? 'expanded' : ''}">`;
                    html += buildTreeHTML(item.children, currentLevel);
                    html += '</ul>';
                }
                
                html += '</li>';
            });
            
            return html;
        }
        
        // 5. åˆ‡æ¢æ–‡ä»¶å¤¹æŠ˜å çŠ¶æ€
        function toggleFolder(folderItem) {
            const isCollapsed = folderItem.classList.contains('collapsed');
            const childList = folderItem.nextElementSibling;
            
            if (!childList || childList.tagName !== 'UL') return;
            
            // åˆ‡æ¢CSSç±»
            folderItem.classList.toggle('collapsed');
            childList.classList.toggle('expanded');
            
            // æ›´æ–°æ•°æ®
            updateFolderState(folderItem.dataset.name, isCollapsed);
        }
        
        // 6. æ›´æ–°æ–‡ä»¶å¤¹çŠ¶æ€
        function updateFolderState(folderName, isCollapsed) {
            function updateItem(items) {
                for (const item of items) {
                    if (item.name === folderName && item.type === 'folder') {
                        item.expanded = isCollapsed; // å¦‚æœåŸæ¥æ˜¯æŠ˜å çš„ï¼Œå°±å±•å¼€
                        return true;
                    }
                    if (item.children && updateItem(item.children)) {
                        return true;
                    }
                }
                return false;
            }
            updateItem(treeData);
        }
        
        // 7. é«˜äº®å½“å‰æ–‡ä»¶
        function highlightFile(fileItem) {
            // ç§»é™¤æ‰€æœ‰é«˜äº®
            document.querySelectorAll('.tree-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // æ·»åŠ é«˜äº®
            fileItem.classList.add('active');
            
            // ç¡®ä¿æ‰€æœ‰çˆ¶æ–‡ä»¶å¤¹å±•å¼€
            let parent = fileItem.parentElement;
            while (parent && parent.tagName === 'LI') {
                const folderItem = parent.querySelector('.folder');
                if (folderItem && folderItem.classList.contains('collapsed')) {
                    folderItem.classList.remove('collapsed');
                    const childList = folderItem.nextElementSibling;
                    if (childList) {
                        childList.classList.add('expanded');
                    }
                }
                parent = parent.parentElement;
            }
        }
        
        // 8. æ›´æ–°å¤§çº²
        function updateOutline() {
            const outlineList = document.getElementById('outlineList');
            
            // æ¨¡æ‹Ÿå¤§çº²æ•°æ®
            const outlineData = [
                { level: 1, text: 'ä¸€èˆ¬å½’å› ', id: 'general' },
                { level: 2, text: 'åŸºæœ¬æ¦‚å¿µ', id: 'basic' },
                { level: 2, text: 'ä¸»è¦ç±»å‹', id: 'types' },
                { level: 3, text: 'å› æœå½’å› ', id: 'causal' },
                { level: 3, text: 'è´£ä»»å½’å› ', id: 'responsibility' },
                { level: 3, text: 'èƒ½åŠ›å½’å› ', id: 'ability' },
                { level: 2, text: 'å½±å“å› ç´ ', id: 'factors' },
                { level: 3, text: 'å¤–éƒ¨å› ç´ ', id: 'external' },
                { level: 3, text: 'å†…éƒ¨å› ç´ ', id: 'internal' }
            ];
            
            let html = '';
            outlineData.forEach(item => {
                html += `
                    <li>
                        <a href="#${item.id}" class="outline-item outline-h${item.level}">
                            ${item.text}
                        </a>
                    </li>
                `;
            });
            
            outlineList.innerHTML = html;
            
            // æ·»åŠ å¤§çº²ç‚¹å‡»äº‹ä»¶
            outlineList.addEventListener('click', function(e) {
                const outlineItem = e.target.closest('.outline-item');
                if (outlineItem) {
                    e.preventDefault();
                    document.querySelectorAll('.outline-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    outlineItem.classList.add('active');
                }
            });
        }
        
        // 9. ç§»åŠ¨ç«¯åˆ‡æ¢
        function initMobileToggle() {
            const toggleBtn = document.getElementById('mobileToggle');
            const sidebar = document.querySelector('.sidebar');
            
            if (toggleBtn) {
                toggleBtn.addEventListener('click', () => {
                    sidebar.classList.toggle('show');
                });
            }
        }
        
        // 10. æ¨¡æ‹Ÿæ–‡æ¡£å†…å®¹
        function loadDocumentContent() {
            const markdownSection = document.querySelector('.markdown-section');
            const content = `
                <h1 id="general">ä¸€èˆ¬å½’å› </h1>
                <p>ä¸€èˆ¬å½’å› æ˜¯æŒ‡å¯¹äº‹ä»¶æˆ–ç°è±¡çš„åŸå› è¿›è¡Œæ¨æ–­å’Œè§£é‡Šçš„è¿‡ç¨‹ã€‚</p>
                
                <h2 id="basic">åŸºæœ¬æ¦‚å¿µ</h2>
                <p>å½’å› ç†è®ºæ˜¯ç¤¾ä¼šå¿ƒç†å­¦çš„é‡è¦ç†è®ºä¹‹ä¸€ï¼Œä¸»è¦ç ”ç©¶äººä»¬å¦‚ä½•è§£é‡Šè‡ªå·±å’Œä»–äººçš„è¡Œä¸ºã€‚</p>
                
                <h2 id="types">ä¸»è¦ç±»å‹</h2>
                
                <h3 id="causal">å› æœå½’å› </h3>
                <p>å› æœå½’å› æ˜¯æŒ‡å°†äº‹ä»¶çš„å‘ç”Ÿå½’å› äºæŸä¸ªç‰¹å®šçš„åŸå› ã€‚</p>
                
                <h3 id="responsibility">è´£ä»»å½’å› </h3>
                <p>è´£ä»»å½’å› æ˜¯æŒ‡å°†äº‹ä»¶çš„è´£ä»»å½’äºæŸä¸ªä¸ªä½“æˆ–ç¾¤ä½“ã€‚</p>
                
                <h3 id="ability">èƒ½åŠ›å½’å› </h3>
                <p>èƒ½åŠ›å½’å› æ˜¯æŒ‡å°†æˆåŠŸæˆ–å¤±è´¥å½’å› äºä¸ªäººèƒ½åŠ›ã€‚</p>
                
                <h2 id="factors">å½±å“å› ç´ </h2>
                
                <h3 id="external">å¤–éƒ¨å› ç´ </h3>
                <ul>
                    <li>ç¯å¢ƒå› ç´ </li>
                    <li>ç¤¾ä¼šå› ç´ </li>
                    <li>æ–‡åŒ–å› ç´ </li>
                </ul>
                
                <h3 id="internal">å†…éƒ¨å› ç´ </h3>
                <ul>
                    <li>ä¸ªäººç‰¹è´¨</li>
                    <li>åŠ¨æœº</li>
                    <li>æƒ…ç»ªçŠ¶æ€</li>
                </ul>
            `;
            
            markdownSection.innerHTML = content;
            
            // åˆå§‹åŒ–å¤§çº²
            updateOutline();
            
            // é«˜äº®å½“å‰æ–‡ä»¶
            highlightCurrentFile();
        }
        
        // 11. é«˜äº®å½“å‰æ–‡ä»¶
        function highlightCurrentFile() {
            // æ¨¡æ‹Ÿå½“å‰æ‰“å¼€çš„æ˜¯"ä¸€èˆ¬å½’å› "æ–‡ä»¶
            const fileItems = document.querySelectorAll('.tree-item.file');
            fileItems.forEach(item => {
                if (item.querySelector('a')?.textContent === 'ä¸€èˆ¬å½’å› ') {
                    highlightFile(item);
                }
            });
        }
        
        // ===== åˆå§‹åŒ– =====
        document.addEventListener('DOMContentLoaded', function() {
            initLayout();
            loadDocumentContent();
        });
    </script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Docsify -->
    <script src="https://cdn.jsdelivr.net/npm/docsify@4"></script>
</body>
</html>